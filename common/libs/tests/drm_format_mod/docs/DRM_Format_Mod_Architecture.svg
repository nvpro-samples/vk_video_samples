<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1e3a5f;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0d1f33;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="boxGrad1" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b7dd8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2a5a9e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="boxGrad2" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#76b852;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#528a3b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="boxGrad3" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e67e22;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0621a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="boxGrad4" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7d4692;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="650" fill="#f5f6fa"/>
  
  <!-- Title -->
  <rect x="0" y="0" width="900" height="50" fill="url(#headerGrad)"/>
  <text x="450" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
    DRM Format Modifier Test Architecture
  </text>
  
  <!-- Test Application Layer -->
  <rect x="50" y="70" width="800" height="100" rx="8" fill="url(#boxGrad1)" filter="url(#shadow)"/>
  <text x="450" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    DrmFormatModTest Application
  </text>
  
  <!-- Sub-components -->
  <rect x="70" y="110" width="170" height="45" rx="4" fill="white" opacity="0.9"/>
  <text x="155" y="137" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2a5a9e">
    Format Query Tests
  </text>
  <text x="155" y="149" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">
    TC1xx
  </text>
  
  <rect x="260" y="110" width="170" height="45" rx="4" fill="white" opacity="0.9"/>
  <text x="345" y="137" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2a5a9e">
    Image Create Tests
  </text>
  <text x="345" y="149" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">
    TC2xx
  </text>
  
  <rect x="450" y="110" width="170" height="45" rx="4" fill="white" opacity="0.9"/>
  <text x="535" y="137" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2a5a9e">
    Export/Import Tests
  </text>
  <text x="535" y="149" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">
    TC3xx
  </text>
  
  <rect x="640" y="110" width="170" height="45" rx="4" fill="white" opacity="0.9"/>
  <text x="725" y="137" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2a5a9e">
    YCbCr Video Tests
  </text>
  <text x="725" y="149" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">
    TC4xx
  </text>
  
  <!-- Test Infrastructure Layer -->
  <rect x="50" y="190" width="800" height="85" rx="8" fill="url(#boxGrad2)" filter="url(#shadow)"/>
  <text x="450" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Test Infrastructure
  </text>
  
  <rect x="70" y="230" width="230" height="35" rx="4" fill="white" opacity="0.9"/>
  <text x="185" y="252" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#528a3b">
    DrmFormats (VK�DRM mapping)
  </text>
  
  <rect x="320" y="230" width="230" height="35" rx="4" fill="white" opacity="0.9"/>
  <text x="435" y="252" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#528a3b">
    TestConfig &amp; TestResult
  </text>
  
  <rect x="570" y="230" width="230" height="35" rx="4" fill="white" opacity="0.9"/>
  <text x="685" y="252" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#528a3b">
    DrmModifierInfo &amp; FormatInfo
  </text>
  
  <!-- VkCodecUtils Layer -->
  <rect x="50" y="295" width="800" height="85" rx="8" fill="url(#boxGrad3)" filter="url(#shadow)"/>
  <text x="450" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    VkCodecUtils Infrastructure
  </text>
  
  <rect x="70" y="335" width="175" height="35" rx="4" fill="white" opacity="0.9"/>
  <text x="157" y="357" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#c0621a">
    VulkanDeviceContext
  </text>
  
  <rect x="260" y="335" width="140" height="35" rx="4" fill="white" opacity="0.9"/>
  <text x="330" y="357" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#c0621a">
    VkImageResource
  </text>
  
  <rect x="415" y="335" width="140" height="35" rx="4" fill="white" opacity="0.9"/>
  <text x="485" y="357" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#c0621a">
    VkBufferResource
  </text>
  
  <rect x="570" y="335" width="120" height="35" rx="4" fill="white" opacity="0.9"/>
  <text x="630" y="357" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#c0621a">
    nvVkFormats
  </text>
  
  <rect x="705" y="335" width="130" height="35" rx="4" fill="white" opacity="0.9"/>
  <text x="770" y="357" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#c0621a">
    Helpers
  </text>
  
  <!-- Vulkan Extensions Layer -->
  <rect x="50" y="400" width="800" height="100" rx="8" fill="url(#boxGrad4)" filter="url(#shadow)"/>
  <text x="450" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Vulkan Extensions
  </text>
  
  <rect x="70" y="440" width="180" height="50" rx="4" fill="white" opacity="0.9"/>
  <text x="160" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#7d4692">
    VK_EXT_image_drm_
  </text>
  <text x="160" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#7d4692">
    format_modifier
  </text>
  
  <rect x="270" y="440" width="150" height="50" rx="4" fill="white" opacity="0.9"/>
  <text x="345" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#7d4692">
    VK_EXT_external_
  </text>
  <text x="345" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#7d4692">
    memory_dma_buf
  </text>
  
  <rect x="440" y="440" width="150" height="50" rx="4" fill="white" opacity="0.9"/>
  <text x="515" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#7d4692">
    VK_KHR_external_
  </text>
  <text x="515" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#7d4692">
    memory_fd
  </text>
  
  <rect x="610" y="440" width="150" height="50" rx="4" fill="white" opacity="0.9"/>
  <text x="685" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#7d4692">
    VK_KHR_sampler_
  </text>
  <text x="685" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#7d4692">
    ycbcr_conversion
  </text>
  
  <!-- Linux/DRM Layer -->
  <rect x="50" y="520" width="800" height="55" rx="8" fill="#2c3e50" filter="url(#shadow)"/>
  <text x="450" y="552" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Linux DRM/KMS (drm_fourcc.h, DMA-BUF)
  </text>
  
  <!-- Arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#555"/>
    </marker>
  </defs>
  
  <line x1="450" y1="170" x2="450" y2="188" stroke="#555" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="275" x2="450" y2="293" stroke="#555" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="380" x2="450" y2="398" stroke="#555" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="500" x2="450" y2="518" stroke="#555" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Legend -->
  <rect x="50" y="590" width="800" height="50" rx="4" fill="white" stroke="#ddd"/>
  <text x="70" y="610" font-family="Arial, sans-serif" font-size="10" fill="#333" font-weight="bold">Test Flow:</text>
  <text x="70" y="628" font-family="Arial, sans-serif" font-size="10" fill="#666">
    1. Query DRM modifiers � 2. Create image with modifier � 3. Export DMA-BUF FD � 4. Import on same device � 5. Validate
  </text>
  
  <rect x="600" y="600" width="12" height="12" fill="url(#boxGrad1)"/>
  <text x="618" y="610" font-family="Arial, sans-serif" font-size="9" fill="#666">RGB</text>
  <rect x="660" y="600" width="12" height="12" fill="url(#boxGrad2)"/>
  <text x="678" y="610" font-family="Arial, sans-serif" font-size="9" fill="#666">YCbCr</text>
  <rect x="730" y="600" width="12" height="12" fill="url(#boxGrad3)"/>
  <text x="748" y="610" font-family="Arial, sans-serif" font-size="9" fill="#666">Linear</text>
  <rect x="800" y="600" width="12" height="12" fill="url(#boxGrad4)"/>
  <text x="818" y="610" font-family="Arial, sans-serif" font-size="9" fill="#666">Tiled</text>
</svg>
